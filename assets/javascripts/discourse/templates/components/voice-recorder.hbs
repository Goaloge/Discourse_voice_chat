<div class="voice-recorder {{if isRecording 'recording'}}">
  {{#if microphoneAccessError}}
    <div class="microphone-error">
      {{i18n "voice_messages.errors.microphone_access"}}
    </div>
  {{else}}
    <div class="recorder-controls">
      {{#if isRecording}}
        <div class="recording-indicator">
          <div class="recording-dot"></div>
          <span class="recording-time">{{formattedTime}}</span>
        </div>

        <div class="recording-buttons">
          <button class="btn btn-flat cancel-recording" {{action "cancelRecording"}}>
            {{i18n "voice_messages.cancel"}}
          </button>

          <button class="btn btn-primary stop-recording" {{action "stopRecording"}}>
            {{d-icon "stop"}}
            {{i18n "voice_messages.stop"}}
          </button>
        </div>
      {{else}}
        <button class="btn btn-primary start-recording" {{action "startRecording"}}>
          {{d-icon "microphone"}}
          {{i18n "voice_messages.start_recording"}}
        </button>
      {{/if}}
    </div>
  {{/if}}
</div>